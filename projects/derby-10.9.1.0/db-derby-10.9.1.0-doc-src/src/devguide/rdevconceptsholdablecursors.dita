<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN"
 "../dtd/reference.dtd">
<!-- 
Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to You under the Apache License, Version 2.0
(the "License"); you may not use this file except in compliance with
the License.  You may obtain a copy of the License at      

   http://www.apache.org/licenses/LICENSE-2.0  

Unless required by applicable law or agreed to in writing, software  
distributed under the License is distributed on an "AS IS" BASIS,  
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  
See the License for the specific language governing permissions and  
limitations under the License.
-->
<reference id="rdevconceptsholdablecursors" xml:lang="en-us">
<title>Holdable result sets</title>
<shortdesc>The holdable result set feature permits an application to
keep result sets open after implicit or explicit commits. By default,
the cursor controlled by the result set is held open after a commit.</shortdesc>
<prolog><metadata>
<keywords><indexterm>Cursors<indexterm>holdable</indexterm></indexterm></keywords>
</metadata></prolog>
<refbody>
<section> <note> <ph conref="../conrefs.dita#prod/productshortname"></ph> also
supports non-holdable result sets.</note>
</section>
<section><p>When you create a statement, you can specify that the result set
will be automatically closed when a commit occurs.
Result sets are automatically
closed when a transaction aborts, whether or not they have been specified
to be held open.</p></section>
<section><p>To specify whether a result set should be held open after a commit
takes place, supply one of the following <i>ResultSet</i> parameters to the <codeph><i>Connection</i></codeph> method <codeph><i>createStatement</i
></codeph>, <codeph><i>prepareStatement</i></codeph>, or <codeph><i>prepareCall</i></codeph>:</p></section>
<section> 
<ul>
<li><i><i>CLOSE_CURSORS_AT_COMMIT</i></i>   <p>Result sets are closed when an
implicit or explicit commit is performed.</p></li>
<li><i><i>HOLD_CURSORS_OVER_COMMIT</i></i>   <p>Result sets are held open when
a commit is performed, implicitly or explicitly. This is the default behavior.</p></li>
</ul></section>
<section><p>The method <i>Statement.getResultSetHoldability()</i> indicates
whether a result set generated by the Statement object stays open or closes, upon
commit. See the <cite><ph conref="../conrefs.dita#pub/citref"></ph></cite> for
more information.</p></section>
<section><p>When an implicit or explicit commit occurs, result sets
that hold cursors open behave as follows:</p></section>
<section> <ul>
<li>Open result sets remain open. Non-scrollable result sets becomes
positioned before the next logical row of the result set. Scrollable
insensitive result sets keep their current position.</li>
<li>When the session is terminated, the result set is closed and destroyed.</li>
<li>All locks are released, including locks protecting the current
cursor position.</li>
<li>For non-scrollable result sets, immediately following a commit, the
only valid operations that can be performed on the <i>ResultSet</i>
object are:   <ul>
<li>positioning the result set to the next row with <codeph><i>ResultSet.next()</i></codeph>.</li>
<li>closing the result set with <codeph><i>ResultSet.close()</i></codeph>.</li>
</ul></li>
</ul></section>
<section><p>When a rollback or rollback to savepoint occurs, either explicitly or implicitly, the following
behavior applies:<ul>
<li>All open result sets are closed.</li>
<li>All locks acquired during the unit of work are released.</li>
</ul></p></section>
<section> <note> Holdable result sets do not work with XA
transactions in <ph
conref="../conrefs.dita#prod/productshortname"></ph>. When working
with XA transactions, the result set should be opened with holdability
<codeph>ResultSet.CLOSE_CURSORS_AT_COMMIT</codeph>.</note></section>
</refbody>
</reference>
