<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>C-JDBC User's Guide</title><meta content="DocBook XSL Stylesheets V1.65.1" name="generator"><link rel="home" href="index.html" title="C-JDBC User's Guide"><link rel="next" href="ar01s02.html" title="2.&nbsp;Getting the Sofware"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">C-JDBC User's Guide</th></tr><tr><td align="left" width="20%">&nbsp;</td><th align="center" width="60%">&nbsp;</th><td align="right" width="20%">&nbsp;<a accesskey="n" href="ar01s02.html"><img src="../../images/next.gif" alt="Next"></a></td></tr></table><hr></div><div class="article" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="N10002"></a>C-JDBC User's Guide</h1></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Emmanuel</span> <span class="surname">Cecchet</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Julie</span> <span class="surname">Marguerite</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Mathieu</span> <span class="surname">Peltier</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Nicolas</span> <span class="surname">Modrzyk</span></h3></div></div></div><div><p class="releaseinfo">Version 2.0.2</p></div><div><p class="copyright">Copyright &copy; 2002, 2003, 2004, 2005 French National Institute For Research In Computer Science And 
        Control (INRIA), Emic Networks</p></div><div><div class="legalnotice"><p>Java, and all Java-based trademarks are trademarks or registered 
        trademarks of Sun Microsystems, Inc. in the United States and other 
        countries.</p></div></div></div><div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="index.html#getting_started">1. Getting Started</a></span></dt><dd><dl><dt><span class="section"><a href="index.html#what_is_cjdbc">1.1. What is C-JDBC?</a></span></dt><dt><span class="section"><a href="index.html#what_do_i_need_to_use_cjdbc">1.2. What do I need to use C-JDBC?</a></span></dt><dt><span class="section"><a href="index.html#why_should_i_use_cjdbc">1.3. Why should I use C-JDBC?</a></span></dt><dt><span class="section"><a href="index.html#how_does_it_works">1.4. How does it work?</a></span></dt><dt><span class="section"><a href="index.html#what_does_it_cost">1.5. What does it cost?</a></span></dt><dt><span class="section"><a href="index.html#what_modifications_are_needed">1.6. What kind of modifications are needed?</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s02.html">2. Getting the Sofware</a></span></dt><dt><span class="section"><a href="ar01s03.html">3. Installation</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s03.html#cjdbc_controller">3.1. C-JDBC Controller</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s03.html#using_java_graphical_installer">3.1.1. Using the Java graphical installer</a></span></dt><dt><span class="section"><a href="ar01s03.html#using_binary_distribution">3.1.2. Using the binary distribution</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s03.html#cjdbc_driver">3.2. C-JDBC Driver</a></span></dt><dt><span class="section"><a href="ar01s03.html#raidb1_out_of_the_box">3.3. C-JDBC out of the box</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s04.html">4. C-JDBC Driver</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s04.html#driver_overview">4.1. Overview</a></span></dt><dt><span class="section"><a href="ar01s04.html#loading_the_driver">4.2. Loading the Driver</a></span></dt><dt><span class="section"><a href="ar01s04.html#cjdbc_jdbc_url">4.3. C-JDBC JDBC URL</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s04.html#url_options">4.3.1. URL options</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s04.html#proxying_mode">4.4. Proxying mode</a></span></dt><dt><span class="section"><a href="ar01s04.html#getting_a_connection_using_data_source">4.5. Getting a connection using a data source</a></span></dt><dt><span class="section"><a href="ar01s04.html#stored_procedures">4.6. Stored procedures</a></span></dt><dt><span class="section"><a href="ar01s04.html#using_blobs">4.7. Blobs: Binary Large Objects</a></span></dt><dt><span class="section"><a href="ar01s04.html#using_clobs">4.8. Clobs: Character Large Objects</a></span></dt><dt><span class="section"><a href="ar01s04.html#resultset_streaming">4.9. ResultSet streaming</a></span></dt><dt><span class="section"><a href="ar01s04.html#current_driver_limitations">4.10. Current Limitations</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s05.html">5. Configuring C-JDBC with 3rd party software</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s05.html#forenotes">5.1. Forenotes on configuring C-JDBC with your application</a></span></dt><dt><span class="section"><a href="ar01s05.html#configuring_cjdbc_with_tomcat">5.2. Configuring C-JDBC with Jakarta Tomcat</a></span></dt><dt><span class="section"><a href="ar01s05.html#configuring_cjdbc_with_jonas">5.3. Configuring C-JDBC with JOnAS</a></span></dt><dt><span class="section"><a href="ar01s05.html#configuring_cjdbc_with_jboss">5.4. Configuring C-JDBC with JBoss</a></span></dt><dt><span class="section"><a href="ar01s05.html#configuring_cjdbc_with_weblogic">5.5. Configuring C-JDBC with BEA Weblogic Server 7.x/8.x</a></span></dt><dt><span class="section"><a href="ar01s05.html#configuring_cjdbc_with_hibernate">5.6. Configuring C-JDBC with Hibernate</a></span></dt><dt><span class="section"><a href="ar01s05.html#using_sequence_with_hibernate">5.7. Using sequences with Hibernate, C-JDBC and PostgreSQL</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s06.html">6. C-JDBC controller</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s06.html#design_overview">6.1. Design Overview</a></span></dt><dt><span class="section"><a href="ar01s06.html#starting_controller">6.2. Starting the Controller</a></span></dt><dt><span class="section"><a href="ar01s06.html#writing_the_controller_config_file">6.3. Writing the controller configuration file</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s06.html#dtd_controller_parameters">6.3.1. Controller Parameters</a></span></dt><dt><span class="section"><a href="ar01s06.html#dtd_controller_internationalization">6.3.2. Internationalization</a></span></dt><dt><span class="section"><a href="ar01s06.html#dtd_controller_report">6.3.3. Report</a></span></dt><dt><span class="section"><a href="ar01s06.html#dtd_controller_jmx">6.3.4. JMX</a></span></dt><dt><span class="section"><a href="ar01s06.html#dtd_controller_database">6.3.5. Virtual Database</a></span></dt><dt><span class="section"><a href="ar01s06.html#dtd_controller_security">6.3.6. Security</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s06.html#configuring_the_log">6.4. Configuring the Log</a></span></dt><dt><span class="section"><a href="ar01s06.html#recovery_log">6.5. Recovery Log</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s06.html#N10784">6.5.1. A practical example</a></span></dt><dt><span class="section"><a href="ar01s06.html#understanding_checkpoints">6.5.2. Understanding checkpoints</a></span></dt><dt><span class="section"><a href="ar01s06.html#N107A9">6.5.3. A fault tolerant Recovery Log</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s06.html#controller_replication">6.6. Controller replication</a></span></dt><dt><span class="section"><a href="ar01s06.html#current_controller_limitations">6.7. Current Limitations</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s07.html">7. Administration console</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s07.html#jmx_notifications">7.1. Jmx Notifications List</a></span></dt><dt><span class="section"><a href="ar01s07.html#starting_console">7.2. Starting the Administration Console</a></span></dt><dt><span class="section"><a href="ar01s07.html#console_quickstart">7.3. Console Quickstart</a></span></dt><dt><span class="section"><a href="ar01s07.html#console_main_menu">7.4. Console Main Menu</a></span></dt><dt><span class="section"><a href="ar01s07.html#administrator_menu">7.5. Administrator Menu</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s07.html#administrator_standard_commands">7.5.1. Administrator Standard Commands</a></span></dt><dt><span class="section"><a href="ar01s07.html#administrator_expert_commands">7.5.2. Administrator Expert Commands</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s07.html#automated_backup_with_jmx">7.6. Automated Backup With Jmx</a></span></dt><dt><span class="section"><a href="ar01s07.html#recovering_from_a_failed_controller_in_distributed_mode">7.7. Recoverying from a failed controller in distributed mode</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s08.html">8. Virtual Database Console Menu</a></span></dt><dt><span class="section"><a href="ar01s09.html">9. Monitoring Console Menu</a></span></dt><dt><span class="section"><a href="ar01s10.html">10. RAIDb Basics</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s10.html#raidb_definitions">10.1. RAIDb Definition</a></span></dt><dt><span class="section"><a href="ar01s10.html#raidb0">10.2. RAIDb-0</a></span></dt><dt><span class="section"><a href="ar01s10.html#raidb1">10.3. RAIDb-1</a></span></dt><dt><span class="section"><a href="ar01s10.html#raidb2">10.4. RAIDb-2</a></span></dt><dt><span class="section"><a href="ar01s10.html#nested_raidb_levels">10.5. Nested RAIDb Levels</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s11.html">11. Virtual database configuration</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s11.html#writing_a_virtual_database_configuration_file">11.1. Writing a Virtual Database Configuration File</a></span></dt><dt><span class="section"><a href="ar01s11.html#dtd_virtualdatabase">11.2. Virtual Database</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s11.html#distribution">11.2.1. Distribution</a></span></dt><dt><span class="section"><a href="ar01s11.html#dtd_sql_monitoring">11.2.2. Monitoring</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s11.html#dtd_backupmanager">11.3. Backup Manager</a></span></dt><dt><span class="section"><a href="ar01s11.html#dtd_authenticationmanager">11.4. Authentication Manager</a></span></dt><dt><span class="section"><a href="ar01s11.html#dtd_databasebackend">11.5. Database Backend</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s11.html#dtd_rewriting_rules">11.5.1. Rewriting requests on backends</a></span></dt><dt><span class="section"><a href="ar01s11.html#dtd_databaseschema">11.5.2. Database Schema Definition</a></span></dt><dt><span class="section"><a href="ar01s11.html#dtd_connectionmanager">11.5.3. Connection Manager</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s11.html#dtd_requestmanager">11.6. Request Manager</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s11.html#dtd_macrohandler">11.6.1. Macros Handler</a></span></dt><dt><span class="section"><a href="ar01s11.html#dtd_requestscheduler">11.6.2. Request Scheduler</a></span></dt><dt><span class="section"><a href="ar01s11.html#dtd_requestcache">11.6.3. Request Cache</a></span></dt><dt><span class="section"><a href="ar01s11.html#dtd_loadbalancer">11.6.4. Load Balancer</a></span></dt><dt><span class="section"><a href="ar01s11.html#dtd_recoverylog">11.6.5. Recovery Log</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s11.html#ssl_configuration">11.7. SSL Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s11.html#ssl_controller">11.7.1. Controller</a></span></dt><dt><span class="section"><a href="ar01s11.html#ssl_console_clients">11.7.2. Console / Jmx Clients</a></span></dt><dt><span class="section"><a href="ar01s11.html#ssl_driver">11.7.3. Driver</a></span></dt><dt><span class="section"><a href="ar01s11.html#ssl_certficates">11.7.4. Certificates (public and private keys)</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s11.html#configuration_examples">11.8. Configuration Examples</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s12.html">12. Request Player</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s12.html#recording_a_request_trace">12.1. Recording a request trace</a></span></dt><dt><span class="section"><a href="ar01s12.html#replaying_a_trace_file">12.2. Replaying a trace file</a></span></dt><dt><span class="section"><a href="ar01s12.html#requestplayer.properties">12.3. requestplayer.properties</a></span></dt></dl></dd><dt><span class="section"><a href="ar01s13.html">13. Glossary</a></span></dt><dt><span class="section"><a href="ar01s14.html">14. About C-JDBC</a></span></dt><dd><dl><dt><span class="section"><a href="ar01s14.html#license">14.1. License</a></span></dt><dt><span class="section"><a href="ar01s14.html#web_sites">14.2. Web Site</a></span></dt><dt><span class="section"><a href="ar01s14.html#wiki">14.3. Wiki</a></span></dt><dt><span class="section"><a href="ar01s14.html#mailing_lists">14.4. Mailing Lists</a></span></dt><dt><span class="section"><a href="ar01s14.html#reporting_bug">14.5. Reporting a Bug</a></span></dt><dt><span class="section"><a href="ar01s14.html#getting_involved">14.6. Getting Involved</a></span></dt><dt><span class="section"><a href="ar01s14.html#about_inria">14.7. About INRIA</a></span></dt><dt><span class="section"><a href="ar01s14.html#about_objectweb">14.8. About ObjectWeb</a></span></dt></dl></dd></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="getting_started"></a>1.&nbsp;Getting Started</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="what_is_cjdbc"></a>1.1.&nbsp;What is C-JDBC?</h3></div></div><div></div></div><p>C-JDBC is a database cluster middleware that allows any <span class="trademark">Java</span>&trade; application (standalone application, 
        servlet or <span class="trademark">EJB</span>&trade; container, ...) to 
        transparently access a cluster of databases through <span class="trademark">JDBC</span>&trade;. You do not have to modify client 
        applications, application servers or database server software. You just 
        have to ensure that all database accesses are performed through 
        C-JDBC.</p><p>C-JDBC is a <span class="emphasis"><em>free</em></span>, <span class="emphasis"><em>open 
        source</em></span> project of the <a href="http://www.objectweb.org/" target="_top">ObjectWeb Consortium</a>. It is 
        licensed under the <a href="http://www.gnu.org/copyleft/lesser.html" target="_top">GNU Lesser General Public 
        License</a> (LGPL).</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="what_do_i_need_to_use_cjdbc"></a>1.2.&nbsp;What do I need to use C-JDBC?</h3></div></div><div></div></div><p>In order to use C-JDBC, you will need:</p><div class="itemizedlist"><ul type="disc"><li><p>a client application that accesses a database through 
            JDBC,</p></li><li><p>a <span class="trademark">JDK</span>&trade; 1.3 (or greater) 
            compliant <span class="trademark">Java Virtual Machine</span>&trade; 
            (JVM)<sup>[<a href="#ftn.N10075" name="N10075">1</a>]</sup>,</p></li><li><p>a database with a JDBC driver (type 1, 2, 3 or 4) or an ODBC 
            driver used with the JDBC-ODBC bridge.</p></li><li><p>a network supporting TCP/IP communications between your cluster 
            nodes.</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="../../images/note.gif"></td><th align="left">Note</th></tr><tr><td valign="top" align="left" colspan="2"><p>If your client application uses ODBC, it is possible to use an 
          ODBC-JDBC bridge such as the <a href="http://www.unixodbc.org/" target="_top">unixODBC</a> provided by 
          Easysoft.</p></td></tr></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="why_should_i_use_cjdbc"></a>1.3.&nbsp;Why should I use C-JDBC?</h3></div></div><div></div></div><p>You have a Java application or a Java-based application server that 
        accesses one or several databases. The database tier becomes the 
        bottleneck of your application or it is a single point of failure or 
        both. C-JDBC can help you resolve these problems by providing:</p><div class="itemizedlist"><ul type="disc"><li><p>performance scalability by adding database nodes and balacing 
            the load among these nodes.</p></li><li><p>high availability of the database tier, i.e. C-JDBC tolerates 
            database crashes and offers transparent failover using database 
            replication techniques.</p></li><li><p>improved performance with fine grain query caching and 
            transparent connection pooling.</p></li><li><p>SQL traffic logging for performance monitoring and 
            analysis.</p></li><li><p>support for clusters of heterogenous database engines.</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="how_does_it_works"></a>1.4.&nbsp;How does it work?</h3></div></div><div></div></div><p>C-JDBC provides a flexible architecture that allows you to achieve 
        scalability, high availability and failover with your database tier. 
        C-JDBC implements the concept of RAIDb: <span class="emphasis"><em>Redundant Array of 
        Inexpensive Databases</em></span> (see <a href="ar01s10.html" title="10.&nbsp;RAIDb Basics">Section&nbsp;10, &ldquo;RAIDb Basics&rdquo;</a>). 
        The database is distributed and replicated among several nodes and 
        C-JDBC load balances the queries between these nodes.</p><p>C-JDBC provides a generic JDBC driver to be used by the clients 
        (see <a href="ar01s04.html" title="4.&nbsp;C-JDBC Driver">Section&nbsp;4, &ldquo;C-JDBC Driver&rdquo;</a>). This driver forwards the SQL 
        requests to the C-JDBC controller (see <a href="ar01s06.html" title="6.&nbsp;C-JDBC controller">Section&nbsp;6, &ldquo;C-JDBC controller&rdquo;</a>) that balances them on a cluster of 
        databases (reads are load balanced and writes are broadcasted). C-JDBC 
        can be used with any RDBMS (Relational DataBase Management System) 
        providing a JDBC driver, that is to say almost all existing open source 
        and commercial databases. <a href="index.html#fig_c-jdbc_principle" title="Figure&nbsp;1.&nbsp;C-JDBC principle">Figure&nbsp;1, &ldquo;C-JDBC principle&rdquo;</a> gives 
        an overview of the C-JDBC principle.</p><div class="figure"><a name="fig_c-jdbc_principle"></a><p class="title"><b>Figure&nbsp;1.&nbsp;C-JDBC principle</b></p><div class="mediaobject" align="center"><img src="images/c-jdbc_principle.gif" align="middle" alt="C-JDBC principle"></div></div><p>C-JDBC allows to build any cluster configuration including mixing 
        database engines from different vendors. The main features provided by 
        C-JDBC are performance scalability, fault tolerance and high 
        availability. Additional features such as monitoring, logging, SQL 
        requests caching are provided as well.</p><p>The architecture is widely open to allow anyone to plug custom 
        requests schedulers, load balancers, connection managers, caching 
        policies, ...</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="what_does_it_cost"></a>1.5.&nbsp;What does it cost?</h3></div></div><div></div></div><p>From a software point of view, C-JDBC is an open-source software 
        licensed under LGPL which means that it is free of charge for any usage 
        (personal or commercial). If you are using commercial RDBMS (such as 
        Oracle, DB2, ...), you will have to buy extra licenses for the nodes 
        where you install replicas of the database. But you can possibly use 
        open-source databases to host replicas of your main database.</p><p>You need to buy extra machines if you want more performance and 
        more fault tolerance. C-JDBC has been designed to work with standard 
        off-the-shelf workstations because it primarily targets low cost 
        open-source solutions but it can work as well with large SMP machines. 
        A standard Ethernet network is sufficient to achieve good 
        performance.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="what_modifications_are_needed"></a>1.6.&nbsp;What kind of modifications are needed?</h3></div></div><div></div></div><p>You <span class="emphasis"><em>do not have to change anything</em></span> to your 
        application or your database.</p><p>You only have to update the JDBC driver configuration used by your 
        application (usually it is just a configuration file update) and to 
        setup a C-JDBC configuration file (see <a href="ar01s11.html" title="11.&nbsp;Virtual database configuration">Section&nbsp;11, &ldquo;Virtual database configuration&rdquo;</a>).</p></div></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N10075" name="ftn.N10075">1</a>] </sup>C-JDBC may work with older JVM version, but 
            hasn't been tested.</p></div></div></div><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%">&nbsp;</td><td align="center" width="20%">&nbsp;</td><td align="right" width="40%">&nbsp;<a accesskey="n" href="ar01s02.html"><img src="../../images/next.gif" alt="Next"></a></td></tr><tr><td valign="top" align="left" width="40%">&nbsp;</td><td align="center" width="20%">&nbsp;</td><td valign="top" align="right" width="40%">&nbsp;2.&nbsp;Getting the Sofware</td></tr></table></div></body></html>